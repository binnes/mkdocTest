
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Automatically create formatted documentation from Markdown files in a GitHub repository. The Markdown is automatically formatted using Docs, generated when a GitHub pull request or push is made to the repository using GitHub Actions and hosted on GitHub Pages." name="description"/>
<link href="https://binnes.github.io/mkdocTest/GitHubActions.html" rel="canonical"/>
<meta content="Brian Innes" name="author"/>
<link href="assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-6.1.0" name="generator"/>
<title>Actions - Testing mkdocs</title>
<link href="assets/stylesheets/main.bc7e593a.min.css" rel="stylesheet"/>
<link href="assets/stylesheets/palette.ab28b872.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
<link href="css/extra.css" rel="stylesheet"/>
<link href="css/pdf-print.css" rel="stylesheet"/>
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-172132667-1","binnes.github.io/mkdocTest"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#github-actions">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="Testing mkdocs" class="md-header-nav__button md-logo" href="https://binnes.github.io/mkdocTest" title="Testing mkdocs">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            Testing mkdocs
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              Actions
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/binnes/mkdocTest" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    binnes/mkdocTest
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Testing mkdocs" class="md-nav__button md-logo" href="https://binnes.github.io/mkdocTest" title="Testing mkdocs">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    Testing mkdocs
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/binnes/mkdocTest" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    binnes/mkdocTest
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="index.html">
      Home
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        Actions
        <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="GitHubActions.html">
      Actions
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#actions">
    Actions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#workflow">
    Workflow
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#user-limits">
    User Limits
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="MkDocs.html">
      MkDocs
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="GitHubPages.html">
      Pages
    </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#actions">
    Actions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#workflow">
    Workflow
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#user-limits">
    User Limits
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<h1 id="github-actions">GitHub Actions<a class="headerlink" href="#github-actions" title="Permanent link">¶</a></h1>
<p>GitHub Actions are an automation feature build into GitHub.  They allow actions to be triggered as a result of activity, such as a push or pull request, on a repository</p>
<p>GitHub Actions are easy to set up and are available on both the free and paid GitHub plans.  Note: Actions are not yet available on all Enterprise Git sites.  </p>
<p>You can easily tell if your git project is enabled for Actions by seeing if there is an Action section:</p>
<p><img alt="GitHub menu" src="images/menu.png"/></p>
<p><a href="https://help.github.com/en/actions" target="_blank">Full documentation</a> is available for GitHub actions, but follow these simple steps and use this repository as a reference.  The action used in this project publishes the project documentation (in the <strong>docs</strong> folder of the repo) to a GitHub pages site using the MkDocs static site generator.</p>
<ol>
<li>Create a <strong>.github</strong> directory in your repository</li>
<li>Add an <strong>actions</strong> directory inside the <strong>.github</strong> directory</li>
<li>Create an action to generate and publish the site using <a href="https://www.mkdocs.org" target="_blank">MkDocs</a> (<em>see below for instructions</em>)</li>
<li>Add a <strong>workflows</strong> directory inside the <strong>.github</strong> directory</li>
<li>Create a workflow to checkout the code from git and then run the action created in step 3 to generate the site</li>
</ol>
<h2 id="actions">Actions<a class="headerlink" href="#actions" title="Permanent link">¶</a></h2>
<p>An action is an individual task, which can be run as part of a workflow initiated when something happens on a GitHub repository.  There is a <a href="https://github.com/marketplace?type=actions" target="_blank">marketplace</a> of actions available or you can create your own private actions.</p>
<p>In this example a private action is created.</p>
<p>Private actions can exist in the git repository where they will be used.  I recommend adding them within the .github directory to separate the GitHub action configuration with the primary purpose of the github repository.</p>
<p>See the <a href="https://help.github.com/en/actions/creating-actions" target="_blank">documentation</a> for all the options for creating actions, but this example uses a container to perform the operations of the action.</p>
<p>An action is defined by a configuration file, called <strong>action.yml</strong>, again the syntax of the config file is described in the <a href="https://help.github.com/en/actions/creating-actions/metadata-syntax-for-github-actions" target="_blank">documentation</a>.  The <strong>action.yml</strong> file for this project contains the following:</p>
<pre><code class="language-yaml"># action.yml
name: 'Deploy to GitHub Pages'
description: 'Publish Markdown docs as GitHub Pages static site'
runs:
  using: 'docker'
  image: 'Dockerfile'
</code></pre>
<p>Here you see a name and description, then a <strong>runs</strong> section which uses a Docker container to perform the work.  The Docker container image can be specified using a <strong>Dockerfile</strong> - the path is relative to the <strong>action.yml</strong> file, so in this case in the same directory.  It is also possible to specify an image from a public image repository, such as Docker Hub.</p>
<p>The Docker file for this project contains the following:</p>
<pre><code class="language-dockerfile">FROM python:alpine

RUN apk add --no-cache \
    build-base \
    git \
    git-fast-import \
    openssh

RUN pip install --no-cache-dir mkdocs

COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

ENTRYPOINT ["/entrypoint.sh"]
</code></pre>
<p>which simple installs the prerequisite packages to install and build the mkdocs runtime, then copies in the script which will run when the contain is run.</p>
<p>The entrypoint script contains the following:</p>
<pre><code class="language-sh">#!/bin/sh

mkdocs gh-deploy --config-file "${GITHUB_WORKSPACE}/mkdocs.yml" --force
</code></pre>
<p>which simple runs the mkdocs command, with the <strong>gh-deploy</strong> option to deploy to github pages.  Notice the use of the <strong>GITHUB_WORKSPACE</strong> environment variable, which the GitHub Actions runtime initialises at the container startup.</p>
<h2 id="workflow">Workflow<a class="headerlink" href="#workflow" title="Permanent link">¶</a></h2>
<p>The workflow defines when a GitHub action will run and what actions will be run.  For a project the workflow files must exist in the <strong>.github/workflows</strong> directory structure at the root of the project.</p>
<p>The workflow file (<strong>build.yml</strong>) for this project contains the following:</p>
<pre><code class="language-yaml">name: GenerateSite

on:
  push:
    branches: [master]
  pull_request:
    branches: [master]
jobs:
  generate:
    name: 'Run mkdocs gh-deploy'
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v2

      - name: generate site
        uses: ./.github/actions/
</code></pre>
<p>Here you can see the workflow has a name then the <strong>on</strong> section defines when this workflow will run.  Here I specified that this workflow will only run when something is pushed to the master branch or a pull request is made to the master branch.  Activity on other branches will not trigger this workflow.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>GitHub as renamed the default branch from <strong>master</strong> to <strong>main</strong> in all new repositories</p>
</div>
<p>When the workflow triggers a single job is run within a Ubuntu Linux container.  The job has 2 steps that are run sequentially.  </p>
<p>The first one uses an action from the marketplace to checkout the latest code from the repository (after the push or pull request that triggered the workflow has taken place).</p>
<p>The second one is our private action to generate the MkDocs site and publish it to GitHub Pages.  Notice the uses property points to the directory containing the <strong>action.yml</strong> file, which is relative to the project root directory.</p>
<p>You can use the <strong>Actions</strong> section of the GitHub web UI to check on the progress of actions and see the status of all Action triggered and provides access to the logs generated by all actions that have previously run.</p>
<p>You can add a badge to your project README.md, to give a visual indication if the latest Action completed successfully.  The badge for this site is created using the following:</p>
<pre><code class="language-md">GitHub Pages : ![GenerateSite](https://github.com/binnes/mkdocTest/workflows/GenerateSite/badge.svg?branch=master)
</code></pre>
<h2 id="user-limits">User Limits<a class="headerlink" href="#user-limits" title="Permanent link">¶</a></h2>
<p>GitHub Actions are available on <a href="https://docs.github.com/en/actions/getting-started-with-github-actions/about-github-actions" target="_blank">most</a> GitHub accounts, though there are <a href="https://docs.github.com/en/actions/getting-started-with-github-actions/about-github-actions#usage-limits" target="_blank">usage limitations</a>, but for documentation formatting the limitations should not pose an issue.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="index.html" rel="prev">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="MkDocs.html" rel="next">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                MkDocs
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
 ... <a class="link--pdf-download" download href="pdf/mkdocs.pdf" title="PDF">download PDF</a></div>
</div>
</div>
</footer>
</div>
<script src="assets/javascripts/vendor.6a3d08fc.min.js"></script>
<script src="assets/javascripts/bundle.71201edf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
<script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
</body>
</html>